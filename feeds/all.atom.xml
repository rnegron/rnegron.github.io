<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Raúl Negrón's Website</title><link href="https://raulnegron.me/" rel="alternate"></link><link href="https://raulnegron.me/feeds/all.atom.xml" rel="self"></link><id>https://raulnegron.me/</id><updated>2018-07-27T00:00:00-04:00</updated><entry><title>Identity and Equality in Python</title><link href="https://raulnegron.me/blog/2018/dev-python-strings-identity-vs-equality" rel="alternate"></link><published>2018-07-27T00:00:00-04:00</published><updated>2018-07-27T00:00:00-04:00</updated><author><name>Raúl</name></author><id>tag:raulnegron.me,2018-07-27:/blog/2018/dev-python-strings-identity-vs-equality</id><summary type="html">&lt;p&gt;I would consider &lt;a href="https://www.python.org/"&gt;Python&lt;/a&gt; to be the programming language I&amp;#8217;m most comfortable writing code in. There&amp;#8217;s plenty to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I would consider &lt;a href="https://www.python.org/"&gt;Python&lt;/a&gt; to be the programming language I&amp;#8217;m most comfortable writing code in. There&amp;#8217;s plenty to love, and one of its more recognizable features is its simple to read &lt;a href="https://en.wikipedia.org/wiki/Python_syntax_and_semantics"&gt;syntax&lt;/a&gt;. I&amp;#8217;ve heard the phrase &amp;#8220;executable pseudocode&amp;#8221; thrown around before, and its easy to see where the comparisons come&amp;nbsp;from. &lt;/p&gt;
&lt;p&gt;A great side effect of sporting such a relatively simple to understand syntax is its &lt;a href="https://www.economist.com/science-and-technology/2018/07/21/python-has-brought-computer-programming-to-a-vast-new-audience"&gt;mass appeal&lt;/a&gt;, with people jumping in with little programming knowledge and using Python to jump start their new coding&amp;nbsp;adventures. &lt;/p&gt;
&lt;p&gt;Its not hard to get carried away and forget that, despite the focus on readability, code is not the same as prose. Its always worthwhile to keep the subtleties of a particular language in mind. That being said, this post is about the bug I created when I forgot about the (perhaps not so subtle) distinction between identity and equality in Python, and what I learned from that&amp;nbsp;mistake.&lt;/p&gt;
&lt;p&gt;Let&amp;#8217;s review the fundamentals before diving into the&amp;nbsp;particulars.&lt;/p&gt;
&lt;h1&gt;Object&amp;nbsp;Equality&lt;/h1&gt;
&lt;p&gt;Object equality refers to the intuitive notion of equality from mathematics. Sounds simple&amp;nbsp;enough. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;  &lt;span class="c1"&gt;# True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The equality operator is part of Python&amp;#8217;s built-in &lt;a href="https://docs.python.org/3/library/stdtypes.html?highlight=comparison#comparisons"&gt;comparison operators&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From the docs, we see that &lt;em&gt;&amp;#8220;objects of different types, except different numeric types, never compare equal.&amp;#8221;&lt;/em&gt; We can test this out as&amp;nbsp;follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Comparison between objects of different types, one non-numeric&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;  &lt;span class="c1"&gt;# False, x and y are different objects&lt;/span&gt;

&lt;span class="c1"&gt;# Comparison between different numeric types&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;1.0&lt;/span&gt;
&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;class &amp;#39;int&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;class &amp;#39;float&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;   &lt;span class="c1"&gt;# True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can also define equality on our own objects by writing an &lt;code&gt;__eq__()&lt;/code&gt; dunder&amp;nbsp;method:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Goomba&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__eq__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;        Goomba is equal to other if the sum of their values is even &lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Koopa&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__eq__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;        Koopa is equal to other if the sum of their values is odd&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="n"&gt;goombario&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Goomba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;goombella&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Goomba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;kooper&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Koopa&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;koops&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Koopa&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;goombella&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;goombario&lt;/span&gt;  &lt;span class="c1"&gt;# False, 1 + 2 = 3, 3 % 2 = 1&lt;/span&gt;
&lt;span class="n"&gt;goombario&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;goombario&lt;/span&gt;  &lt;span class="c1"&gt;# True,  1 + 1 = 2, 2 % 2 = 0&lt;/span&gt;

&lt;span class="n"&gt;goombario&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;kooper&lt;/span&gt;     &lt;span class="c1"&gt;# True,  1 + 1 = 2, 2 % 2 = 0&lt;/span&gt;
&lt;span class="n"&gt;goombella&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;kooper&lt;/span&gt;     &lt;span class="c1"&gt;# False, 2 + 1 = 3, 3 % 2 = 1&lt;/span&gt;
&lt;span class="n"&gt;goombella&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;koops&lt;/span&gt;      &lt;span class="c1"&gt;# True,  2 + 2 = 4, 4 % 2 = 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You may have noticed something peculiar from the example: due to the way equality was defined in the above classes, the order of the operands matters (the operation is not symmetric in this&amp;nbsp;case).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;goombella&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;kooper&lt;/span&gt;     &lt;span class="c1"&gt;# False, 3 % 2 = 1 (odd for Goomba = false)&lt;/span&gt;
&lt;span class="n"&gt;kooper&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;goombella&lt;/span&gt;     &lt;span class="c1"&gt;# True,  3 % 2 = 1 (odd for Koopa = true)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Syntactic_sugar"&gt;Syntactic sugar&lt;/a&gt; is to blame for any confusion here. You can read more &lt;a href="https://docs.python.org/3/reference/datamodel.html#object.__eq__"&gt;in the Python docs&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;Digging a bit further, we can see from the &lt;a href="https://docs.python.org/3/reference/expressions.html#value-comparisons"&gt;value comparisons for expressions&lt;/a&gt; docs page that it is intended for the &lt;code&gt;==&lt;/code&gt; operator to be a test for an &lt;a href="https://en.wikipedia.org/wiki/Equivalence_relation"&gt;equivalence relation&lt;/a&gt;. So the above example, where symmetry is not observed, would not be consistent with the way Python defines equality. In any case, object equality is pretty straightforward from a practical point of&amp;nbsp;view.&lt;/p&gt;
&lt;h1&gt;Object&amp;nbsp;Identity&lt;/h1&gt;
&lt;p&gt;For me, the notion of &amp;#8220;identity&amp;#8221; is a bit more vague than &amp;#8220;equality&amp;#8221;. What does it mean for two objects to share an identity? While perhaps not as intuitive as object equality, object identity is not much more complicated. In Python, the identity operator is appropriately known as the &lt;code&gt;is&lt;/code&gt; &lt;a href="https://docs.python.org/3/reference/expressions.html#is"&gt;operator&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Basically, &lt;code&gt;a is b&lt;/code&gt; if and only if &lt;code&gt;id(a) == id(b)&lt;/code&gt;, where &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; are objects and &lt;code&gt;id(x)&lt;/code&gt; is &lt;a href="https://docs.python.org/3/library/functions.html#id"&gt;the memory address of x&lt;/a&gt;. So, for two objects to be &amp;#8220;identical&amp;#8221;, it must be the case that they are the same exact object! In other words, if two variables share the same object address, there are in fact &lt;em&gt;not&lt;/em&gt; two objects but rather two &lt;em&gt;references&lt;/em&gt; to the same&amp;nbsp;object.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;  &lt;span class="c1"&gt;# True&lt;/span&gt;


&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;  &lt;span class="c1"&gt;# True&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;  &lt;span class="c1"&gt;# False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are some subtleties to this that may not be immediately apparent. For example, &lt;code&gt;[1, 2, 3] is [1, 2, 3]&lt;/code&gt; = &lt;code&gt;False&lt;/code&gt;. Meanwhile, &lt;code&gt;(1, 2, 3) is (1, 2, 3)&lt;/code&gt; = &lt;code&gt;True&lt;/code&gt;. The reason is, as you may suspect, that &lt;a href="https://docs.python.org/3/library/stdtypes.html?highlight=comparison#lists"&gt;lists&lt;/a&gt; are mutable while &lt;a href="https://docs.python.org/3/library/stdtypes.html?highlight=comparison#tuples"&gt;tuples&lt;/a&gt; are&amp;nbsp;not. &lt;/p&gt;
&lt;h1&gt;Equality vs Identity in Python&amp;nbsp;Strings&lt;/h1&gt;
&lt;p&gt;Well, what about strings? We know that strings in Python are immutable objects. And as we might expect, &lt;code&gt;'hello, world' is 'hello, world'&lt;/code&gt; = &lt;code&gt;True&lt;/code&gt;! But here&amp;#8217;s where things start to get&amp;nbsp;interesting&amp;#8230;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Example 1&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;  &lt;span class="c1"&gt;# True&lt;/span&gt;

&lt;span class="c1"&gt;# Example 2&lt;/span&gt;
&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;str_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;str_2&lt;/span&gt;  &lt;span class="c1"&gt;# False (!)&lt;/span&gt;

&lt;span class="c1"&gt;# Example 3&lt;/span&gt;
&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;helloworld&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;str_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;helloworld&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;str_2&lt;/span&gt;  &lt;span class="c1"&gt;# True (?!)&lt;/span&gt;

&lt;span class="c1"&gt;# Example 4&lt;/span&gt;
&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;str_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;str_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;str_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# False(!?!)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What gives? And to make things more interesting, the above code was executed line-by-line on the interactive shell. If you copy the above into a source file run the Python on the file (and printing the results), you will find that the first three conditions are &lt;code&gt;True&lt;/code&gt; (the last one remains &lt;code&gt;False&lt;/code&gt;). Which means that the second identity operation just changed truth values! And how come removing the comma and whitespace from both strings at the end there didn&amp;#8217;t make the identity check &lt;code&gt;True&lt;/code&gt; again? The key to answering all these questions is: &lt;a href="https://en.wikipedia.org/wiki/String_interning"&gt;string interning&lt;/a&gt;! Let&amp;#8217;s talk about&amp;nbsp;it.&lt;/p&gt;
&lt;h2&gt;String Interning, or &amp;#8220;Compare strings in O(1) instead of&amp;nbsp;O(n)!&amp;#8221;&lt;/h2&gt;
&lt;p&gt;This concept was completely unknown to me until very recently. &lt;em&gt;String interning&lt;/em&gt; is the process by which a particular &lt;code&gt;string&lt;/code&gt; object can be stored in an internal dictionary for faster lookups. Further assignments of the same string contents will yield a reference to this stored object instead of creating a new&amp;nbsp;object.&lt;/p&gt;
&lt;p&gt;In practical terms, interning a string allows for lower memory usage as well as a performance boost in matching via string equality. That is, instead of relying on &lt;a href="https://en.wikipedia.org/wiki/Category:String_matching_algorithms"&gt;standard string matching algorithms&lt;/a&gt; to determine whether or not two strings are the same (i.e., contain the same characters in the same order), you can simply check whether or not they are references to the same object. This allows an &lt;em&gt;equality&lt;/em&gt; check to be optimized as an &lt;em&gt;identity&lt;/em&gt; check, which typically means that an &lt;em&gt;O(n)&lt;/em&gt; character-by-character operation has been optimized all the way down to an &lt;em&gt;O(1)&lt;/em&gt; numerical address comparison. This is quite the optimization, which is why Python natively interns strings based on a set of internal rules. And if we examine some of these rules, we&amp;#8217;ll find answers to the questions left unsolved in the previous&amp;nbsp;section.&lt;/p&gt;
&lt;p&gt;For example, it turns out that Python natively interns all strings which contain only &lt;a href="https://en.wikipedia.org/wiki/ASCII"&gt;&lt;span class="caps"&gt;ASCII&lt;/span&gt;&lt;/a&gt; letters, digits and the underscore character. This explains what happened in &lt;em&gt;Example 3&lt;/em&gt;. Both strings are pure &lt;span class="caps"&gt;ASCII&lt;/span&gt; and therefore got interned by Python (conversely, their comma-and-whitespace-containing &lt;code&gt;hello, world&lt;/code&gt; counterparts from &lt;em&gt;Example 2&lt;/em&gt; were not interned by this rule). Also, it&amp;#8217;s important to note that native interning occurs at compilation time. This fact explains why &lt;code&gt;False&lt;/code&gt; was the result in &lt;em&gt;Example 4&lt;/em&gt;. It would seem that the &lt;code&gt;replace&lt;/code&gt; method turned our comma-and-whitespace-containing strings into intern-me-&lt;span class="caps"&gt;ASCII&lt;/span&gt; strings, but in fact the string replacement occurred at runtime, and thus never got the chance to be interned&amp;nbsp;natively. &lt;/p&gt;
&lt;p&gt;But how does this explain &lt;em&gt;Example 1&lt;/em&gt;? Well, Python was smart enough to realize that &lt;code&gt;'hello, world' is 'hello, world'&lt;/code&gt; is an attempt to compare the reference of two immutable objects which happen to be the same and it optimized accordingly. Now, how come the code exhibits completely different behavior when running in the shell versus in a source file for &lt;em&gt;Example 2&lt;/em&gt;?  Notice that this same scenario plays out a little differently depending on the execution environment. This is because, in the shell, the code is fed to the Python interpreter line-by-line, as opposed to file execution, where the Python has access to all the code in the file at once. Again, Python was smart enough to optimize the strings when it had forward-lookup capabilities available, but not so when it did not &amp;#8220;know&amp;#8221; what the next line would be (which was the case for &lt;em&gt;Example 1&lt;/em&gt;, where it did&amp;nbsp;optimize).&lt;/p&gt;
&lt;p&gt;Phew! Now, let&amp;#8217;s look at how we use manual string interning and get the &lt;code&gt;is&lt;/code&gt; operator to work as we expected it to&amp;nbsp;originally:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nb"&gt;intern&lt;/span&gt;

&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;intern&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;str_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;intern&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello, world&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str_1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str_2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;class &amp;#39;str&amp;#39;&amp;gt; &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str_1&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;str_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There it is! Two different references to the same object. We saved memory by not creating two different objects for the same string, we achieved a performance boost by comparing references instead of the contents of the strings, and we learned a lot about Python strings and objects along the&amp;nbsp;way.&lt;/p&gt;
&lt;h1&gt;From a bug,&amp;nbsp;knowledge&lt;/h1&gt;
&lt;p&gt;I mentioned at the top that I became interested in this whole string identity vs equality thing because of a bug I found (a.k.a created) at work. Here it is, in all its&amp;nbsp;glory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;some_database_alias&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At first glance, there may not seem to be much of a problem here. However, if the code that is expected to run after the conditional expression is of critical importance, then it pays to make sure that the conditions under which the expression evaluates to true are well&amp;nbsp;understood.&lt;/p&gt;
&lt;p&gt;Then came the time for that line of code to do its one&amp;nbsp;job&amp;#8230;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;#39;some_database_alias&amp;#39;&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;  &lt;span class="c1"&gt;# &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;some_database_alias&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# True&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;some_database_alias&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It didn&amp;#8217;t work. I wrote an identity comparison where I should have written an equality comparison instead. The moral of the story here: &lt;strong&gt;&lt;code&gt;is&lt;/code&gt; is not &lt;code&gt;==&lt;/code&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;What started out as a casual review of Python syntax caused by a simple enough bug turned into a curiosity-driven deep dive into Python string internals and comparison operators. All in good fun. The following article by Adrien Guillo was very helpful and goes into the lower-level goings on of CPython&amp;#8217;s string interning mechanisms: &lt;a href="http://guilload.com/python-string-interning/"&gt;The internals of Python string interning&lt;/a&gt;. Satwik Kansal wrote another, higher-level introduction to the topic: &lt;a href="https://www.codementor.io/satwikkansal/do-you-really-think-you-know-strings-in-python-fnxh8mtha"&gt;Do you really think you know strings in&amp;nbsp;Python?&lt;/a&gt; &lt;/p&gt;</content><category term="python"></category><category term="django"></category><category term="programming"></category></entry><entry><title>Getting started with Game Boy development on Mac</title><link href="https://raulnegron.me/blog/2018/starting-gb-dev" rel="alternate"></link><published>2018-04-21T00:00:00-04:00</published><updated>2018-04-21T00:00:00-04:00</updated><author><name>Raúl Negrón</name></author><id>tag:raulnegron.me,2018-04-21:/blog/2018/starting-gb-dev</id><summary type="html">&lt;p&gt;A quick guide to getting started with Game Boy development on&amp;nbsp;Mac&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;br&gt;
&lt;center&gt;
&lt;img src="https://raulnegron.me/images/gameboy.jpg" style="width: 170px;"/&gt;
&lt;/center&gt;
&lt;br&gt;&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t know what inspired it, but recently I got the idea that programming for an old game console would make for a fun project. Apart from giving me an excuse to write code in a language other than Python, it&amp;#8217;s something I&amp;#8217;ve wanted to do ever since I learned that programming was at the heart of all the great games I&amp;#8217;ve played throughout the years. So, I decided to find out how feasible it would be to program for one of these old school gaming&amp;nbsp;systems.&lt;/p&gt;
&lt;p&gt;The Game Boy Advance was my first research subject. While reading up on the &lt;span class="caps"&gt;GBA&lt;/span&gt;, I learned that the original Game Boy (model &amp;#8220;&lt;span class="caps"&gt;DMG&lt;/span&gt;-01&amp;#8221;) had a more well-established homebrew community, compared to the Game Boy Advance. There is a lot of great documentation out there on developing for the Game Boy! Just visiting the &lt;a href="https://github.com/avivace/awesome-gbdev"&gt;awesome-gbdev&lt;/a&gt; repo convinced me to choose the original Game Boy as my retro coding&amp;nbsp;platform.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;d like to blog about my experience as a form of self-motivation. I&amp;#8217;ll write about the process from the start and then be able to look back and see how I&amp;#8217;ve progressed along the way! And if someone happens upon these posts, I hope they find them&amp;nbsp;useful.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;NOTE&lt;/span&gt;&lt;/strong&gt;: I&amp;#8217;ll be using the following Japanese-language blog post as a template for this one: &lt;a href="https://qiita.com/syano/items/2180da2cfe9ce161e65b"&gt;開発環境の導入&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Development Environment on&amp;nbsp;MacOS&lt;/h1&gt;
&lt;p&gt;As the title says, I am working towards a functional &lt;span class="caps"&gt;GB&lt;/span&gt; dev environment on MacOS (specifically High Sierra, version 10.13.4). Sadly, most of the good tools for Game Boy development are Windows-only. But that&amp;#8217;s okay! We can get away with using &lt;a href="https://www.winehq.org/"&gt;Wine&lt;/a&gt; to run the best of&amp;nbsp;them.&lt;/p&gt;
&lt;h2&gt;An introduction to the&amp;nbsp;tools&lt;/h2&gt;
&lt;p&gt;The development scene for the Game Boy is centered around two programming languages: C and assembly. My personal preference was to start developing in C. I&amp;#8217;m using Harry Mulder&amp;#8217;s &lt;a href="http://www.devrs.com/gb/hmgd/gbtd.html"&gt;Tile Designer&lt;/a&gt; as well as his &lt;a href="http://www.devrs.com/gb/hmgd/gbmb.html"&gt;Map Builder&lt;/a&gt; to manage the graphical aspects of developing for a video game console. Finally, the &lt;a href="http://bgb.bircd.org/"&gt;bgb&lt;/a&gt; emulator is the standard for testing and debugging Game Boy&amp;nbsp;games.&lt;/p&gt;
&lt;h1&gt;Getting a C compiler up and&amp;nbsp;running:&lt;/h1&gt;
&lt;p&gt;The tool of choice here is the &lt;a href="http://gbdk.sourceforge.net/"&gt;Game Boy Developers Kit&lt;/a&gt; (&lt;span class="caps"&gt;GBDK&lt;/span&gt;). The installation may be tricky on MacOS. There are a couple of alternative installation methods around, but I went for the&amp;nbsp;following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git clone https://github.com/x43x61x69/gbdk-osx
$ &lt;span class="nb"&gt;cd&lt;/span&gt; gbdk-osx
$ mkdir -p sdcc/bin
$ sed -i &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;1005d&amp;#39;&lt;/span&gt; sdcc/src/SDCC.y
$ make
$ sudo cp -r gbdk-osx /opt/gbdk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;make&lt;/code&gt; will proceed to build &lt;span class="caps"&gt;GBDK&lt;/span&gt;. Note that the above commands do some extra stuff besides building the compiler libraries. Click on them below to learn more about why they are required if we want the build to&amp;nbsp;succeed.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/co-me/gbdk/issues/1"&gt;&lt;code&gt;mkdir -p sdcc/bin&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/x43x61x69/gbdk-osx/issues/2"&gt;&lt;code&gt;sed -i '' -e '1005d' sdcc/src/SDCC.y&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/co-me/gbdk/issues/5"&gt;&lt;code&gt;sudo cp -r gbdk-osx/build/ppc-unknown-linux2.2/gbdk /opt/gbdk&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Make sure to add the path to the new binaries to your &lt;code&gt;PATH&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/opt/gbdk/bin:&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ideally, you would include that line in your &lt;code&gt;.bash_profile&lt;/code&gt; or similar. The compiler&amp;#8217;s front-end (called &lt;code&gt;lcc&lt;/code&gt;) would then be easily&amp;nbsp;accessible.&lt;/p&gt;
&lt;p&gt;You could also choose to leave the binaries in-place and make a symbolic link, like&amp;nbsp;so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo ln -s build/ppc-unknown-linux2.2/gbdk /opt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In that case, you would have to adjust your &lt;code&gt;PATH&lt;/code&gt; accordingly.&lt;/p&gt;
&lt;h1&gt;Building a minimal Game Boy game: a sanity&amp;nbsp;check&lt;/h1&gt;
&lt;p&gt;Having come this far, let&amp;#8217;s make something a bit more involved than a &lt;code&gt;printf("Hello, world!");&lt;/code&gt; for the Game Boy, shall&amp;nbsp;we?&lt;/p&gt;
&lt;p&gt;Create a file and then copy-paste (or type by hand!) the following&amp;nbsp;code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;  // printf(), delay()&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;gb/gb.h&amp;gt;  // joypad(), J_UP, J_DOWN, ...&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;// Loop forever&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="c1"&gt;// Check the status of the Game Boy Joy Pad&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;joypad&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

            &lt;span class="c1"&gt;// If the UP button is pressed...&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;J_UP&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

                &lt;span class="c1"&gt;// Display &amp;quot;Up!&amp;quot; on the screen&lt;/span&gt;
                &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Up!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

                &lt;span class="c1"&gt;// Then wait for half a second...&lt;/span&gt;
                &lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

                &lt;span class="c1"&gt;// Go back to checking the status of the Joy Pad&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

            &lt;span class="c1"&gt;// And so on&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;J_DOWN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Down!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;J_LEFT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Left!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;J_RIGHT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Right!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Save the file as &lt;code&gt;first.c&lt;/code&gt; and proceed to build the&amp;nbsp;code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lcc first.c -o first.gb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hopefully everything compiled correctly! You&amp;#8217;ll know it worked if &lt;code&gt;lcc&lt;/code&gt; stays quiet after compiling, thus obeying &lt;a href="http://www.linfo.org/rule_of_silence.html"&gt;The Rule of Silence&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Let&amp;#8217;s run &lt;em&gt;bgb&lt;/em&gt; (&lt;code&gt;$ wine bgb.exe&lt;/code&gt;), secondary-click the window, open &lt;code&gt;first.gb&lt;/code&gt; and check out the&amp;nbsp;results!&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
&lt;center&gt;
&lt;img src="https://raulnegron.me/images/gb-1-bgb-1.png" style="width: 250px;"/&gt;
&lt;/center&gt;
&lt;br&gt;&lt;/p&gt;
&lt;p&gt;And that&amp;#8217;s it! From code to binary that the Game Boy recognizes, built on MacOS. A world of 8-bit possibilities awaits! A more complete version of this example is available at &lt;a href="http://gbdev.gg8.se/wiki/articles/GBDK_Joypad_Tutorial"&gt;GBDev&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;The C alternative: &lt;span class="caps"&gt;RGBDS&lt;/span&gt; on&amp;nbsp;MacOS&lt;/h2&gt;
&lt;p&gt;This post focused on coding in C. For assembly, there exists the &lt;a href="https://github.com/rednex/rgbds"&gt;Rednex Game Boy Development System (&lt;span class="caps"&gt;RGBDS&lt;/span&gt;)&lt;/a&gt;.
The best part is that installation couldn&amp;#8217;t be&amp;nbsp;simpler.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;brew install rgbds
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I will definitely get into assembly on the &lt;span class="caps"&gt;GB&lt;/span&gt; at some point in the&amp;nbsp;future!&lt;/p&gt;
&lt;h1&gt;Further&amp;nbsp;reading&lt;/h1&gt;
&lt;p&gt;If you can read Japanese (or don&amp;#8217;t mind using Google Translate), I recommend the &lt;a href="https://adventar.org/calendars/2505"&gt;Game Boy Advent Calendar 2017&lt;/a&gt; series of blog&amp;nbsp;posts.&lt;/p&gt;
&lt;p&gt;Finally, having already mentioned the place to get a lot of good resources (&lt;a href="https://github.com/avivace/awesome-gbdev"&gt;awesome-gbdev&lt;/a&gt;), I&amp;#8217;ll go ahead and highlight a few resources on that&amp;nbsp;list.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://media.ccc.de/v/33c3-8029-the_ultimate_game_boy_talk"&gt;The Ultimate Game Boy Talk&lt;/a&gt; - A must-watch deep-dive tech-talk on the original Game&amp;nbsp;Boy.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/mrombout/gbdk_playground"&gt;Simplified &lt;span class="caps"&gt;GBDK&lt;/span&gt; Examples&lt;/a&gt; - Repository containing self-contained examples on &lt;span class="caps"&gt;GBDK&lt;/span&gt; concepts. If you&amp;#8217;d like to see the &lt;code&gt;printf("Hello, world!");&lt;/code&gt; of the Game Boy world, &lt;a href="https://github.com/mrombout/gbdk_playground/tree/master/hello_world"&gt;look no&amp;nbsp;further!&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/pashutk/flappybird-gameboy"&gt;flappybird-gameboy&lt;/a&gt; - Reading the source code of other projects is a good way to get started with development in any environment. Flappy Bird is a simple enough game to make for a good first look into &lt;span class="caps"&gt;GB&lt;/span&gt; development in C using &lt;span class="caps"&gt;GBDK&lt;/span&gt;!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://sameboy.github.io/"&gt;SameBoy&lt;/a&gt; - An active, open-source emulator written in C with a focus on MacOS support. With its debugging features, it has the potential to become the go-to emulator for development purposes on&amp;nbsp;Mac!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.gamasutra.com/blogs/DoctorLudos/20171207/311143/Making_a_Game_Boy_game_in_2017_A_quotSheep_It_Upquot_PostMortem_part_12.php"&gt;Making a Game Boy game in 2017: A &amp;#8220;Sheep It Up!&amp;#8221; Post-Mortem&amp;#8221;&lt;/a&gt; -  A great read chronicling the development of a Game Boy game which introduces plenty of helpful concepts along the&amp;nbsp;way&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Extra: Happy&amp;nbsp;29th!&lt;/h1&gt;
&lt;p&gt;Without realizing it, I uploaded this post on the &lt;a href="https://twitter.com/OnThisDayGaming/status/987792880260575232"&gt;on the 29th anniversary&lt;/a&gt; of the Game Boy&amp;#8217;s Japanese release date! Since I was not aware of the Game Boy&amp;#8217;s Japanese release date, there was a &lt;span class="math"&gt;\(\frac{1}{365} = 0.0027\%\)&lt;/span&gt; chance of this happening! However, taking into account the time-zone difference, I actually uploaded this post at around 7:&lt;span class="caps"&gt;30AM&lt;/span&gt; on the 22nd, Japan time. Oh well, pretty cool in any&amp;nbsp;case!&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="gameboy"></category><category term="programming"></category><category term="mac"></category><category term="c"></category><category term="assembly"></category></entry><entry><title>Hello, Pelican!</title><link href="https://raulnegron.me/blog/2018/hello-pelican" rel="alternate"></link><published>2018-04-14T00:00:00-04:00</published><updated>2018-04-14T00:00:00-04:00</updated><author><name>Raúl</name></author><id>tag:raulnegron.me,2018-04-14:/blog/2018/hello-pelican</id><summary type="html">&lt;p&gt;As taught by &lt;a href="https://en.wikipedia.org/wiki/The_C_Programming_Language#Influence"&gt;K&amp;amp;R&lt;/a&gt;.
This post also brought to you by the &lt;a href="http://docs.getpelican.com/en/stable/quickstart.html"&gt;Pelican quickstart&lt;/a&gt;.&lt;/p&gt;</summary><content type="html">&lt;p&gt;As taught by &lt;a href="https://en.wikipedia.org/wiki/The_C_Programming_Language#Influence"&gt;K&amp;amp;R&lt;/a&gt;.
This post also brought to you by the &lt;a href="http://docs.getpelican.com/en/stable/quickstart.html"&gt;Pelican quickstart&lt;/a&gt;.&lt;/p&gt;</content><category term="blog-post"></category></entry></feed>