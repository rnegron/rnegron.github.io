<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <title>Raúl Negrón's Website - Articles by Raúl</title>

    <meta charset="utf-8" />
    <link href="http://raulnegron.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Raúl Negrón's Website Full Atom Feed" />


    <link rel="stylesheet" href="http://raulnegron.me/theme/css/poole.css"/>
    <link rel="stylesheet" href="http://raulnegron.me/theme/css/syntax.css"/>
    <link rel="stylesheet" href="http://raulnegron.me/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald">
    <link rel="stylesheet" href="http://raulnegron.me/theme/css/styles.css"/>
  </head>

  <body>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="http://raulnegron.me/theme/img/profile.png"/>
    </div>
  </div>

  <nav class="sidebar-nav">
  <a class="sidebar-nav-item" href="http://raulnegron.me/">main page</a>
      <a class="sidebar-nav-item" href="http://raulnegron.me/about">about&nbsp;me</a>
      <a class="sidebar-nav-item" href="http://raulnegron.me/reading">reading&nbsp;list</a>

      <a class="sidebar-nav-item" href="http://raulnegron.me/blog.html">blog</a>


  <a class="sidebar-nav-item" href="https://github.com/rnegron" target="_blank">github</a>
  <a class="sidebar-nav-item" href="https://www.linkedin.com/in/raulnegron/" target="_blank">linkedin</a>
  </nav>

  <div class="sidebar-item">
    <p>Site written in <a href="https://daringfireball.net/projects/markdown/">Markdown</a>, generated by <a href="http://docs.getpelican.com/en/stable/">Pelican</a>, hosted on <a href="https://pages.github.com/">Github Pages</a> and registered using <a href="https://aws.amazon.com/route53/">Route 53</a>.</p>
    <p class="tiny-note">
      <a class="muted" href="https://github.com/thomaswilley/pelicanyan">theme: modified pelicanyan v0.1</a>
    </p>
  </div>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="http://raulnegron.me/" title="Home">Raúl Negrón's Website</a>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="content-title">
<h2>Articles by Raúl</h2>
</div>
<div class="posts">
  <div class="post">
    <h1 class="post-title">
      <a href="http://raulnegron.me/blog/2018/starting-gb-dev" rel="bookmark" title="Permalink to Getting started with Game Boy development on Mac">Getting started with Game Boy development on&nbsp;Mac</a>
    </h1>
    <span class="post-date">April 21, 2018</span>

    <!-- <p><br>
<center>
<img src="http://raulnegron.me/images/gameboy.jpg" style="width: 170px;"/>
</center>
<br></p>
<p>I don&#8217;t know what inspired it, but recently I got the idea that programming for an old game console would make for a fun project. Apart from giving me an excuse to write code in a language other than Python, it&#8217;s something I&#8217;ve wanted to do ever since I learned that programming was at the heart of all the great games I&#8217;ve played throughout the years. So, I decided to find out how feasible it would be to program for one of these old school gaming&nbsp;systems.</p>
<p>The Game Boy Advance was my first research subject. While reading up on the <span class="caps">GBA</span>, I learned that the original Game Boy (model &#8220;<span class="caps">DMG</span>-01&#8221;) had a more well-established homebrew community, compared to the Game Boy Advance. There is a lot of great documentation out there on developing for the Game Boy! Just visiting the <a href="https://github.com/avivace/awesome-gbdev">awesome-gbdev</a> repo convinced me to choose the original Game Boy as my retro coding&nbsp;platform.</p>
<p>I&#8217;d like to blog about my experience as a form of self-motivation. I&#8217;ll write about the process from the start and then be able to look back and see how I&#8217;ve progressed along the way! And if someone happens upon these posts, I hope they find them&nbsp;useful.</p>
<p><strong><span class="caps">NOTE</span></strong>: I&#8217;ll be using the following Japanese-language blog post as a template for this one: <a href="https://qiita.com/syano/items/2180da2cfe9ce161e65b">開発環境の導入</a>.</p>
<h1>Development Environment on&nbsp;MacOS</h1>
<p>As the title says, I am working towards a functional <span class="caps">GB</span> dev environment on MacOS (specifically High Sierra, version 10.13.4). Sadly, most of the good tools for Game Boy development are Windows-only. But that&#8217;s okay! We can get away with using <a href="https://www.winehq.org/">Wine</a> to run the best of&nbsp;them.</p>
<h2>An introduction to the&nbsp;tools</h2>
<p>The development scene for the Game Boy is centered around two programming languages: C and assembly. My personal preference was to start developing in C. I&#8217;m using Harry Mulder&#8217;s <a href="http://www.devrs.com/gb/hmgd/gbtd.html">Tile Designer</a> as well as his <a href="http://www.devrs.com/gb/hmgd/gbmb.html">Map Builder</a> to manage the graphical aspects of developing for a video game console. Finally, the <a href="http://bgb.bircd.org/">bgb</a> emulator is the standard for testing and debugging Game Boy&nbsp;games.</p>
<h1>Getting a C compiler up and&nbsp;running:</h1>
<p>The tool of choice here is the <a href="http://gbdk.sourceforge.net/">Game Boy Developers Kit</a> (<span class="caps">GBDK</span>). The installation may be tricky on MacOS. There are a couple of alternative installation methods around, but I went for the&nbsp;following:</p>
<div class="highlight"><pre><span></span>$ git clone https://github.com/x43x61x69/gbdk-osx
$ <span class="nb">cd</span> gbdk-osx
$ mkdir -p sdcc/bin
$ sed -i <span class="s1">&#39;&#39;</span> -e <span class="s1">&#39;1005d&#39;</span> sdcc/src/SDCC.y
$ make
$ sudo cp -r gbdk-osx /opt/gbdk
</pre></div>


<p><code>make</code> will proceed to build <span class="caps">GBDK</span>. Note that the above commands do some extra stuff besides building the compiler libraries. Click on them below to learn more about why they are required if we want the build to&nbsp;succeed.</p>
<p><a href="https://github.com/co-me/gbdk/issues/1"><code>mkdir -p sdcc/bin</code></a></p>
<p><a href="https://github.com/x43x61x69/gbdk-osx/issues/2"><code>sed -i '' -e '1005d' sdcc/src/SDCC.y</code></a></p>
<p><a href="https://github.com/co-me/gbdk/issues/5"><code>sudo cp -r gbdk-osx/build/ppc-unknown-linux2.2/gbdk /opt/gbdk</code></a></p>
<p>Make sure to add the path to the new binaries to your <code>PATH</code>:</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/opt/gbdk/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>


<p>Ideally, you would include that line in your <code>.bash_profile</code> or similar. The compiler&#8217;s front-end (called <code>lcc</code>) would then be easily&nbsp;accessible.</p>
<p>You could also choose to leave the binaries in-place and make a symbolic link, like&nbsp;so:</p>
<div class="highlight"><pre><span></span>$ sudo ln -s build/ppc-unknown-linux2.2/gbdk /opt
</pre></div>


<p>In that case, you would have to adjust your <code>PATH</code> accordingly.</p>
<h1>Building a minimal Game Boy game: a sanity&nbsp;check</h1>
<p>Having come this far, let&#8217;s make something a bit more involved than a <code>printf("Hello, world!");</code> for the Game Boy, shall&nbsp;we?</p>
<p>Create a file and then copy-paste (or type by hand!) the following&nbsp;code:</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;  // printf(), delay()</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;gb/gb.h&gt;  // joypad(), J_UP, J_DOWN, ...</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// Loop forever</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">// Check the status of the Game Boy Joy Pad</span>
        <span class="k">switch</span><span class="p">(</span><span class="n">joypad</span><span class="p">())</span> <span class="p">{</span>

            <span class="c1">// If the UP button is pressed...</span>
            <span class="k">case</span> <span class="nl">J_UP</span><span class="p">:</span>

                <span class="c1">// Display &quot;Up!&quot; on the screen</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Up!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

                <span class="c1">// Then wait for half a second...</span>
                <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>

                <span class="c1">// Go back to checking the status of the Joy Pad</span>
                <span class="k">break</span><span class="p">;</span>

            <span class="c1">// And so on</span>
            <span class="k">case</span> <span class="nl">J_DOWN</span><span class="p">:</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Down!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>

            <span class="k">case</span> <span class="nl">J_LEFT</span><span class="p">:</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Left!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>

            <span class="k">case</span> <span class="nl">J_RIGHT</span><span class="p">:</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Right!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>

            <span class="k">default</span><span class="o">:</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Save the file as <code>first.c</code> and proceed to build the&nbsp;code:</p>
<div class="highlight"><pre><span></span>$ lcc first.c -o first.gb
</pre></div>


<p>Hopefully everything compiled correctly! You&#8217;ll know it worked if <code>lcc</code> stays quiet after compiling, thus obeying <a href="http://www.linfo.org/rule_of_silence.html">The Rule of Silence</a>.</p>
<p>Let&#8217;s run <em>bgb</em> (<code>$ wine bgb.exe</code>), secondary-click the window, open <code>first.gb</code> and check out the&nbsp;results!</p>
<p><br>
<center>
<img src="http://raulnegron.me/images/gb-1-bgb-1.png" style="width: 250px;"/>
</center>
<br></p>
<p>And that&#8217;s it! From code to binary that the Game Boy recognizes, built on MacOS. A world of 8-bit possibilities awaits! A more complete version of this example is available at <a href="http://gbdev.gg8.se/wiki/articles/GBDK_Joypad_Tutorial">GBDev</a>.</p>
<h2>The C alternative: <span class="caps">RGBDS</span> on&nbsp;MacOS</h2>
<p>This post focused on coding in C. For assembly, there exists the <a href="https://github.com/rednex/rgbds">Rednex Game Boy Development System (<span class="caps">RGBDS</span>)</a>.
The best part is that installation couldn&#8217;t be&nbsp;simpler.</p>
<div class="highlight"><pre><span></span>brew install rgbds
</pre></div>


<p>I will definitely get into assembly on the <span class="caps">GB</span> at some point in the&nbsp;future!</p>
<h1>Further&nbsp;reading</h1>
<p>If you can read Japanese (or don&#8217;t mind using Google Translate), I recommend the <a href="https://adventar.org/calendars/2505">Game Boy Advent Calendar 2017</a> series of blog&nbsp;posts.</p>
<p>Finally, having already mentioned the place to get a lot of good resources (<a href="https://github.com/avivace/awesome-gbdev">awesome-gbdev</a>), I&#8217;ll go ahead and highlight a few resources on that&nbsp;list.</p>
<ul>
<li>
<p><a href="https://media.ccc.de/v/33c3-8029-the_ultimate_game_boy_talk">The Ultimate Game Boy Talk</a> - A must-watch deep-dive tech-talk on the original Game&nbsp;Boy.</p>
</li>
<li>
<p><a href="https://github.com/mrombout/gbdk_playground">Simplified <span class="caps">GBDK</span> Examples</a> - Repository containing self-contained examples on <span class="caps">GBDK</span> concepts. If you&#8217;d like to see the <code>printf("Hello, world!");</code> of the Game Boy world, <a href="https://github.com/mrombout/gbdk_playground/tree/master/hello_world">look no&nbsp;further!</a></p>
</li>
<li>
<p><a href="https://github.com/pashutk/flappybird-gameboy">flappybird-gameboy</a> - Reading the source code of other projects is a good way to get started with development in any environment. Flappy Bird is a simple enough game to make for a good first look into <span class="caps">GB</span> development in C using <span class="caps">GBDK</span>!</p>
</li>
<li>
<p><a href="https://sameboy.github.io/">SameBoy</a> - An active, open-source emulator written in C with a focus on MacOS support. With its debugging features, it has the potential to become the go-to emulator for development purposes on&nbsp;Mac!</p>
</li>
<li>
<p><a href="https://www.gamasutra.com/blogs/DoctorLudos/20171207/311143/Making_a_Game_Boy_game_in_2017_A_quotSheep_It_Upquot_PostMortem_part_12.php">Making a Game Boy game in 2017: A &#8220;Sheep It Up!&#8221; Post-Mortem&#8221;</a> -  A great read chronicling the development of a Game Boy game which introduces plenty of helpful concepts along the&nbsp;way</p>
</li>
</ul>
<h1>Extra: Happy&nbsp;29th!</h1>
<p>Without realizing it, I uploaded this post on the <a href="https://twitter.com/OnThisDayGaming/status/987792880260575232">on the 29th anniversary</a> of the Game Boy&#8217;s Japanese release date! Since I was not aware of the Game Boy&#8217;s Japanese release date, there was a <span class="math">\(\frac{1}{365} = 0.0027\%\)</span> chance of this happening! However, taking into account the time-zone difference, I actually uploaded this post at around 7:<span class="caps">30AM</span> on the 22nd, Japan time. Oh well, pretty cool in any&nbsp;case!</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script> -->
  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="http://raulnegron.me/blog/2018/hello-pelican" rel="bookmark" title="Permalink to Hello, Pelican!">Hello,&nbsp;Pelican!</a>
    </h1>
    <span class="post-date">April 14, 2018</span>

    <!-- <p>As taught by <a href="https://en.wikipedia.org/wiki/The_C_Programming_Language#Influence">K&amp;R</a>.
This post also brought to you by the <a href="http://docs.getpelican.com/en/stable/quickstart.html">Pelican quickstart</a>.</p> -->
  </div>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>
     </div>
  </body>
</html>